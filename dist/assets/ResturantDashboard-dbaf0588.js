import{i as D,r as h,y,j as e,k as U,l as _,m as A,n as z,o as G,p as Q}from"./index-8c8e92dd.js";import{u as N,c as j,a as t,h as c,b as H}from"./handleClasses-87cf47b8.js";const J=()=>{const[x,{isSuccess:o}]=D(),s=N({initialValues:{mobile:"",address:"",city:"",certificate:"",type:"",hero:"",startTime:"",endTime:""},validationSchema:j({mobile:t().required("Enter  mobile"),address:t().required("Enter  address"),city:t().required("Enter  city"),certificate:t().required("Enter  certificate"),type:t().required("Enter  type"),hero:t().required("Enter  hero"),startTime:t().required("Enter  startTime"),endTime:t().required("Enter  endTime")}),onSubmit:(i,{resetForm:b})=>{const v=new FormData;for(const g in i)v.append(g,i[g]);x(v),b()}});return h.useEffect(()=>{o&&y.success("info register success")},[o]),e.jsx("form",{onSubmit:s.handleSubmit,children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-6 offset-sm-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:"Signup"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"mobile",className:"form-label",children:" mobile"}),e.jsx("input",{...s.getFieldProps("mobile"),type:"text",className:c(s,"mobile"),id:"mobile",placeholder:"enter Your mobile"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.mobile})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"address",className:"form-label",children:" address"}),e.jsx("textarea",{...s.getFieldProps("address"),type:"text",className:c(s,"address"),id:"address",placeholder:"Enter Your address"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.address})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"city",className:"form-label",children:" city"}),e.jsx("input",{...s.getFieldProps("city"),type:"text",className:c(s,"city"),id:"city",placeholder:"Enter Your city"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.city})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"certificate",className:"form-label",children:" certificate"}),e.jsx("input",{type:"file",onChange:i=>s.setFieldValue("certificate",i.target.files[0]),className:c(s,"certificate"),id:"certificate",placeholder:"Enter Your certificate"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.certificate})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"type",className:"form-label",children:" type"}),e.jsxs("select",{...s.getFieldProps("type"),className:c(s,"type"),children:[e.jsx("option",{selected:!0,children:"Choose Type"}),e.jsx("option",{value:"veg",children:"veg"}),e.jsx("option",{value:"non-veg",children:"non-veg"})]}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.type})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"hero",className:"form-label",children:" hero"}),e.jsx("input",{type:"file",onChange:i=>s.setFieldValue("hero",i.target.files[0]),className:c(s,"hero"),id:"hero",placeholder:"Confirm Your hero"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.hero})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"startTime",className:"form-label",children:" startTime"}),e.jsx("input",{...s.getFieldProps("startTime"),type:"time",className:c(s,"startTime"),id:"startTime",placeholder:"Confirm Your startTime"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.startTime})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"endTime",className:"form-label",children:" endTime"}),e.jsx("input",{...s.getFieldProps("endTime"),type:"time",className:c(s,"endTime"),id:"endTime",placeholder:"Confirm Your endTime"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.endTime})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3",children:"Update Info"})]})]})})})})})},K=()=>{const[x,o]=h.useState(!0),[s,i]=h.useState(),[b,{isSuccess:v,isError:g,isLoading:O,error:W}]=U(),[I,{isSuccess:E,isError:X,isLoading:Z,error:ee}]=_(),[B,{isSuccess:C,isError:se,isLoading:ae,error:ne}]=A(),[R,{data:f}]=z(),n=N({initialValues:{menu:[{type:"",category:"",name:"",price:"",desc:"",image:""}]},validationSchema:j({menu:H().of(j({type:t().required("Enter type"),category:t().required("Enter category"),name:t().required("Enter name"),price:t().required("Enter price"),desc:t().required("Enter desc"),image:t().required("Enter image")}))}),onSubmit:(r,{resetForm:a})=>{console.log(r);const l=new FormData;for(const d of r.menu)for(const p in d)l.append(p,d[p]);b(l),a()}}),m=N({enableReinitialize:!0,initialValues:{type:s?s.type:"",category:s?s.category:"",name:s?s.name:"",price:s?s.price:"",desc:s?s.desc:"",image:""},validationSchema:j({type:t().required("Enter type"),category:t().required("Enter category"),name:t().required("Enter name"),price:t().required("Enter price"),desc:t().required("Enter desc"),image:t()}),onSubmit:(r,{resetForm:a})=>{const l=new FormData;for(const d in r)l.append(d,r[d]);I({fd:l,_id:s._id}),a()}}),$=()=>{n.setFieldValue("menu",[...n.values.menu,{type:"",category:"",name:"",price:"",desc:"",image:""}])},V=r=>{const a=[...n.values.menu];a.splice(r,1),n.setFieldValue("menu",a)},u=(r,a)=>{var l,d,p,M,k,F,S,T,q,L,P,w;return G({"form-control my-2":!0,"is-invalid":((l=n.touched)==null?void 0:l.menu)&&((p=(d=n.touched)==null?void 0:d.menu[r])==null?void 0:p[a])&&((M=n.errors)==null?void 0:M.menu)&&((F=(k=n.errors)==null?void 0:k.menu[r])==null?void 0:F[a]),"is-valid":((S=n.touched)==null?void 0:S.menu)&&((q=(T=n.touched)==null?void 0:T.menu[r])==null?void 0:q[a])&&((L=n.errors)==null?void 0:L.menu)&&!((w=(P=n.errors)==null?void 0:P.menu[r])!=null&&w[a])})},Y=(r,a)=>{const{files:l}=a.target;n.setFieldValue(`menu[${r}].image`,l[0])};return h.useEffect(()=>{R()},[]),h.useEffect(()=>{C&&y.success("delelete menu success")},[C]),h.useEffect(()=>{E&&y.success("update menu success")},[E]),e.jsxs(e.Fragment,{children:[e.jsx("form",{onSubmit:n.handleSubmit,children:e.jsxs("div",{className:"container my-2",children:[n.values.menu.map((r,a)=>e.jsxs("div",{className:"card my-3",children:[e.jsxs("div",{class:"card-header d-flex justify-content-between",children:[e.jsxs("span",{children:["Menu",a+1]}),a===0?e.jsx("button",{type:"button",className:"btn btn-sm btn-dark",onClick:$,children:"add"}):e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger ",onClick:l=>V(a),children:"remove"})]}),e.jsx("div",{class:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("select",{class:"form-select",className:u(a,"type"),name:`menu[${a}].type`,onChange:n.handleChange,value:n.values.menu[a].type,onBlur:n.handleBlur,children:[e.jsx("option",{selected:!0,children:"Choose type"}),e.jsx("option",{value:"veg",children:"veg"}),e.jsx("option",{value:"non-veg",children:"non-veg"})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("select",{class:"form-select",className:u(a,"category"),name:`menu[${a}].category`,onChange:n.handleChange,value:n.values.menu[a].category,onBlur:n.handleBlur,children:[e.jsx("option",{selected:!0,children:"Choose category"}),e.jsx("option",{value:"Main",children:"Main Course"}),e.jsx("option",{value:"Chinese",children:"Chinese"}),e.jsx("option",{value:"Punjabi",children:"Punjabi"})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("input",{className:u(a,"name"),name:`menu[${a}].name`,onChange:n.handleChange,value:n.values.menu[a].name,placeholder:"Enter dish name",type:"text",onBlur:n.handleBlur})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("input",{className:u(a,"price"),name:`menu[${a}].price`,onChange:n.handleChange,value:n.values.menu[a].price,placeholder:"Enter dish price",type:"text",onBlur:n.handleBlur})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("textarea",{onBlur:n.handleBlur,className:u(a,"desc"),name:`menu[${a}].desc`,onChange:n.handleChange,value:n.values.menu[a].desc})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("input",{name:`menu[${a}].image`,onBlur:n.handleBlur,type:"file",onChange:l=>Y(a,l),className:u(a,"image")})})]})})]},a)),e.jsx("button",{type:"submit",class:"btn btn-primary my-3 w-100 btn-lg",children:"Add Menu"})]})}),e.jsx("div",{className:"container",children:f&&e.jsxs("table",{class:"table table-bordered table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"name"}),e.jsx("th",{children:"category"}),e.jsx("th",{children:"price"}),e.jsx("th",{children:"desc"}),e.jsx("th",{children:"image"}),e.jsx("th",{children:"type"}),e.jsx("th",{children:"action"})]})}),e.jsx("tbody",{children:f&&f.result.map(r=>e.jsxs("tr",{className:`${r.type==="veg"?"table-success":"table-danger"}`,children:[e.jsx("td",{children:r.name}),e.jsx("td",{children:r.category}),e.jsx("td",{children:r.price}),e.jsx("td",{children:r.desc}),e.jsxs("td",{children:[e.jsx("img",{height:100,src:r.image,alt:""})," "]}),e.jsx("td",{children:r.type}),e.jsxs("td",{children:[e.jsx("button",{onClick:a=>i(r),"data-bs-toggle":"modal","data-bs-target":"#editMenu",type:"button",className:"btn btn-sm btn-outline-warning",children:"edit"}),e.jsx("button",{onClick:a=>B(r._id),type:"button",className:"btn btn-sm btn-outline-danger",children:"delete"})]})]},r._id))})]})}),e.jsx("div",{class:"modal fade",id:"editMenu",children:e.jsx("div",{class:"modal-dialog",children:e.jsxs("div",{class:"modal-content",children:[e.jsxs("div",{class:"modal-header",children:[e.jsx("h5",{class:"modal-title",id:"exampleModalLabel",children:"Edit Menu"}),e.jsx("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{class:"modal-body",children:e.jsxs("form",{onSubmit:m.handleSubmit,children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("select",{className:"form-control my-2",...m.getFieldProps("type"),children:[e.jsx("option",{selected:!0,children:"Choose type"}),e.jsx("option",{value:"veg",children:"veg"}),e.jsx("option",{value:"non-veg",children:"non-veg"})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("select",{className:"form-control my-2",...m.getFieldProps("category"),children:[e.jsx("option",{selected:!0,children:"Choose category"}),e.jsx("option",{value:"Main",children:"Main Course"}),e.jsx("option",{value:"Chinese",children:"Chinese"}),e.jsx("option",{value:"Punjabi",children:"Punjabi"})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("input",{className:"form-control my-2",...m.getFieldProps("name"),placeholder:"Enter dish name",type:"text"})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("input",{className:"form-control my-2",...m.getFieldProps("price"),placeholder:"Enter dish price",type:"text"})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("textarea",{className:"form-control my-2",...m.getFieldProps("desc")})}),e.jsx("div",{className:"col-sm-6",children:x?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:s&&s.image,height:50,alt:""}),e.jsx("button",{type:"button",onClick:r=>o(!1),className:"btn btn-primary btn-sm",children:"Change"})]}):e.jsxs(e.Fragment,{children:[" ",e.jsx("input",{className:"form-control my-2",onChange:r=>m.setFieldValue("image",r.target.files[0]),type:"file"}),e.jsx("button",{type:"button",onClick:r=>o(!0),className:"btn btn-primary btn-sm",children:"Cancel"})]})})]}),e.jsx("button",{type:"submit",className:"btn btn-sm w-100 btn-warning",children:"Update Menu"})]})})]})})})]})},le=()=>{const{resturant:x}=Q(o=>o.auth);return e.jsx(e.Fragment,{children:x.infoComplete?e.jsx(K,{}):e.jsx(J,{})})};export{le as default};
