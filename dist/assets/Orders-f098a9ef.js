import{b as u,c as x,r as d,d as j,s as o,y as m,j as s}from"./index-db5e75ad.js";const f=()=>{const[h,{isSuccess:l}]=u(),{data:n}=x(),[t,c]=d.useState({limit:5,skip:0}),[a,{isLoading:p,isError:b,isSuccess:g,error:v,data:i}]=j();return o.on("place-order",e=>{a(t)}),o.on("status-update",e=>{a(t)}),d.useEffect(()=>{l&&m.success("rider assign success")},[l]),d.useEffect(()=>{a(t)},[t]),s.jsxs("div",{className:" container mt-5",children:[s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-sm-4",children:s.jsxs("select",{className:"form-select my-3",value:t.limit,onChange:e=>c({limit:e.target.value,skip:0}),children:[s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"10",children:"10"}),s.jsx("option",{value:"15",children:"15"})]})})}),i&&s.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Customer Name"}),s.jsx("th",{children:"Customer Email"}),s.jsx("th",{children:"Customer Mobile"}),s.jsx("th",{children:"Resturant Name"}),s.jsx("th",{children:"Resturant Email"}),s.jsx("th",{children:"Resturant Mobile"}),s.jsx("th",{children:"Dish"}),s.jsx("th",{children:"Order Status"}),s.jsx("th",{children:"Rider"})]})}),s.jsx("tbody",{children:i.orders.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:e.customer.name}),s.jsx("td",{children:e.customer.email}),s.jsx("td",{children:e.customer.mobile}),s.jsx("td",{children:e.resturant.name}),s.jsx("td",{children:e.resturant.email}),s.jsx("td",{children:e.resturant.mobile}),s.jsx("td",{children:e.items.map(r=>s.jsx("div",{children:s.jsxs("div",{className:"d-block",children:[r.qty," x ",r.dish.name," x ",r.dish.price]})},r._id))}),s.jsx("td",{children:e.status}),s.jsx("td",{children:e.rider?s.jsxs(s.Fragment,{children:[s.jsx("p",{children:s.jsx("strong",{children:e.rider.name})}),s.jsx("p",{children:s.jsx("strong",{children:e.rider.mobile})})]}):s.jsxs("select",{onChange:r=>h({_id:e._id,rider:r.target.value}),className:"form-select",children:[s.jsx("option",{selected:!0,children:"Choose Rider"}),n&&n.result.map(r=>s.jsx("option",{value:r._id,children:r.name},r._id))]})})]},e._id))})]}),i&&[...Array(Math.ceil(i.total/t.limit))].map((e,r)=>s.jsx("button",{type:"button",onClick:y=>c({...t,skip:r*t.limit}),className:`btn btn-sm me-1 ${r*t.limit===t.skip?"btn-primary":"btn-outline-primary"}`,children:r}))]})};export{f as default};
